<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ù„Ù… (Ù†Ø³Ø®Ø© Ù„Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©)</title>
    <style>
        :root {
            --bg-morning: linear-gradient(135deg, #89CFF0 0%, #B6E2F3 100%);
            --bg-evening: linear-gradient(135deg, #2C3E50 0%, #4A6E8A 100%);
            --bg-sleep: linear-gradient(135deg, #1C2833 0%, #34495E 100%);
            --bg-baqiyat: linear-gradient(135deg, #005C97 0%, #363795 100%);
            --card-bg: rgba(255, 255, 255, 0.1);
            --card-hover-bg: rgba(255, 255, 255, 0.15);
            --card-completed-bg: rgba(46, 204, 113, 0.2);
            --text-color: #FFFFFF;
            --btn-bg: rgba(255, 255, 255, 0.2);
            --btn-active-border: #FFFFFF;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            line-height: 1.8;
            transition: background 0.5s ease;
            min-height: 100vh;
            color: var(--text-color);
            font-size: 16px;
        }
        .morning { background: var(--bg-morning); }
        .evening { background: var(--bg-evening); }
        .sleep { background: var(--bg-sleep); }
        .baqiyat { background: var(--bg-baqiyat); }

        .container { max-width: 800px; margin: 0 auto; padding: 15px; }
        .header { text-align: center; margin-bottom: 20px; background: var(--card-bg); padding: 20px; border-radius: 15px; backdrop-filter: blur(10px); }
        .header h1 { font-size: 2em; margin-bottom: 15px; text-shadow: 1px 1px 3px rgba(0,0,0,0.2); }
        .controls { display: flex; justify-content: center; gap: 10px; margin-bottom: 15px; flex-wrap: wrap; }
        .btn { padding: 10px 20px; border: none; border-radius: 25px; cursor: pointer; font-size: 14px; font-weight: bold; transition: all 0.3s ease; background: var(--btn-bg); color: var(--text-color); border: 2px solid transparent; }
        .btn:hover { transform: translateY(-2px); }
        .btn.active { border-color: var(--btn-active-border); }
        
        .dhikr-grid { display: grid; grid-template-columns: 1fr; gap: 15px; }
        @media (min-width: 768px) { .dhikr-grid { grid-template-columns: repeat(2, 1fr); } }

        .dhikr-card { background: var(--card-bg); border-radius: 15px; padding: 20px; backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); transition: all 0.3s ease; cursor: pointer; display: flex; flex-direction: column; justify-content: space-between; }
        .dhikr-card:hover { transform: translateY(-5px); background: var(--card-hover-bg); }
        .dhikr-card.completed { background: var(--card-completed-bg); opacity: 0.7; }
        
        .dhikr-text { font-size: 1.1rem; text-align: center; margin-bottom: 15px; pointer-events: none; flex-grow: 1; white-space: pre-wrap; }
        .dhikr-source { font-size: 0.9rem; opacity: 0.8; text-align: center; margin-bottom: 15px; font-style: italic; pointer-events: none; }
        .dhikr-counter-display { font-size: 1rem; font-weight: bold; padding: 8px 15px; background: rgba(0, 0, 0, 0.2); border-radius: 20px; text-align: center; margin-top: 15px; pointer-events: none; }
        
        .reset-container { text-align: center; margin: 25px 0; }
        .reset-btn { background: rgba(255, 82, 82, 0.7); border: none; color: white; padding: 12px 28px; font-size: 1rem; border-radius: 25px; cursor: pointer; transition: all 0.3s ease; }
        .reset-btn:hover { background: rgba(255, 82, 82, 1); transform: translateY(-2px); }
        
        .reminder-section { background: var(--card-bg); padding: 20px; border-radius: 15px; margin-top: 20px; text-align: center; }
        .reminder-section h2 { margin-bottom: 15px; font-size: 1.2rem; }
        .reminder-controls { display: flex; justify-content: center; align-items: center; gap: 15px; flex-wrap: wrap; }
        #reminder-time { padding: 10px; border-radius: 10px; border: 1px solid #FFF; background: rgba(0,0,0,0.2); color: white; }
        #save-reminder-btn, #cancel-reminder-btn { font-size: 14px; }
        #save-reminder-btn { background: #27ae60; }
        #cancel-reminder-btn { background: #c0392b; }
        #reminder-status { margin-top: 15px; font-size: 0.9rem; font-style: italic; }

        .footer-prayer { text-align: center; margin-top: 30px; padding: 15px; background: rgba(0, 0, 0, 0.1); border-radius: 10px; font-style: italic; font-size: 0.9rem; }
        .hidden { display: none; }
    </style>
</head>
<body class="morning">
    <div class="container">
        <div class="header">
            <h1 id="main-title">Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­</h1>
            <div class="controls">
                <button class="btn active" onclick="showSection('morning', this)">Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­</button>
                <button class="btn" onclick="showSection('evening', this)">Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¡</button>
                <button class="btn" onclick="showSection('sleep', this)">Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù†ÙˆÙ…</button>
                <button class="btn" onclick="showSection('baqiyat', this)">Ø§Ù„Ø¨Ø§Ù‚ÙŠØ§Øª Ø§Ù„ØµØ§Ù„Ø­Ø§Øª</button>
            </div>
        </div>

        <div id="dhikr-container" class="dhikr-grid">
            <!-- Dhikr cards will be loaded here -->
        </div>

        <div class="reset-container">
            <button class="reset-btn" id="reset-all-btn">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
        </div>

        <div class="reminder-section">
            <h2>Ø¶Ø¨Ø· Ø§Ù„ØªØ°ÙƒÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ</h2>
            <div class="reminder-controls">
                <input type="time" id="reminder-time" class="btn">
                <button id="save-reminder-btn" class="btn">Ø­ÙØ¸ Ø§Ù„ØªØ°ÙƒÙŠØ±</button>
                <button id="cancel-reminder-btn" class="btn">Ø¥Ù„ØºØ§Ø¡</button>
            </div>
            <p id="reminder-status"></p>
        </div>

        <div class="footer-prayer">
            <p>Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„ Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù…Ù„ Ø®Ø§Ù„ØµÙ‹Ø§ Ù„ÙˆØ¬Ù‡Ùƒ Ø§Ù„ÙƒØ±ÙŠÙ… ÙˆØ£Ù†ÙØ¹ Ø¨Ù‡ Ø§Ù„Ù…Ø³Ù„Ù…ÙŠÙ† ÙÙŠ ÙƒÙ„ Ù…ÙƒØ§Ù†</p>
        </div>
    </div>

    <script>
        const dhikrData = {
            morning: [
                { text: "Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙØ§Ù„Ù„Ù‡Ù Ù…ÙÙ†Ù’ Ø§Ù„Ø´ÙÙ‘ÙŠÙ’Ø·ÙØ§Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø¬ÙÙŠÙ…Ù\nØ§Ù„Ù„Ù‘Ù‡Ù Ù„Ø§Ù Ø¥ÙÙ„ÙÙ€Ù‡Ù Ø¥ÙÙ„Ø§ÙÙ‘ Ù‡ÙÙˆÙ Ø§Ù„Ù’Ø­ÙÙŠÙÙ‘ Ø§Ù„Ù’Ù‚ÙÙŠÙÙ‘ÙˆÙ…Ù...", source: "Ø¢ÙŠØ© Ø§Ù„ÙƒØ±Ø³ÙŠ", count: 1 },
                { text: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¥Ø®Ù„Ø§Øµ", source: "3 Ù…Ø±Ø§Øª", count: 3 },
                { text: "Ø³ÙˆØ±Ø© Ø§Ù„ÙÙ„Ù‚", source: "3 Ù…Ø±Ø§Øª", count: 3 },
                { text: "Ø³ÙˆØ±Ø© Ø§Ù„Ù†Ø§Ø³", source: "3 Ù…Ø±Ø§Øª", count: 3 },
                { text: "Ø£ÙØµÙ’Ù€Ø¨ÙØ­Ù’Ù†Ø§ ÙˆÙØ£ÙØµÙ’Ù€Ø¨ÙØ­Ù Ø§Ù„Ù…ÙÙ€Ù„Ù’ÙƒÙ Ù„Ù„Ù‡...", source: "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©", count: 1 },
                { text: "Ø§Ù„Ù„Ù‘Ù‡Ù€Ù…ÙÙ‘ Ø£ÙÙ†Ù’ØªÙ Ø±ÙØ¨ÙÙ‘Ù€ÙŠ Ù„Ø§ Ø¥Ù„Ù‡Ù Ø¥Ù„Ø§Ù‘ Ø£ÙÙ†Ù’ØªÙ...", source: "Ø³ÙŠØ¯ Ø§Ù„Ø§Ø³ØªØºÙØ§Ø±", count: 1 },
                { text: "Ø±ÙØ¶ÙŠÙ€ØªÙ Ø¨ÙØ§Ù„Ù„Ù‡Ù Ø±ÙØ¨ÙÙ‘Ù€Ø§Ù‹ ÙˆÙØ¨ÙØ§Ù„Ø¥Ø³Ù’Ù„Ø§Ù…Ù Ø¯ÙŠÙ€Ù†Ø§Ù‹...", source: "3 Ù…Ø±Ø§Øª", count: 3 },
                { text: "Ø§Ù„Ù„Ù‘Ù‡ÙÙ€Ù…ÙÙ‘ Ø¥ÙÙ†ÙÙ‘Ù€ÙŠ Ø£ÙØµÙ’Ø¨ÙÙ€Ø­Ù’ØªÙ Ø£ÙØ´Ù’Ù€Ù‡ÙØ¯ÙÙƒ...", source: "4 Ù…Ø±Ø§Øª", count: 4 },
                { text: "Ø§Ù„Ù„Ù‘Ù‡ÙÙ€Ù…ÙÙ‘ Ù…Ø§ Ø£ÙØµÙ’Ø¨ÙÙ€ÙØ­Ù Ø¨ÙŠ Ù…ÙÙ€Ù†Ù’ Ù†ÙØ¹Ù’Ù€Ù…ÙØ©Ù...", source: "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©", count: 1 },
                { text: "Ø­ÙØ³Ù’Ø¨ÙÙ€ÙŠÙ Ø§Ù„Ù„Ù‘Ù‡Ù Ù„Ø§ Ø¥Ù„Ù‡Ù Ø¥Ù„Ø§Ù‘ Ù‡ÙÙˆÙ...", source: "7 Ù…Ø±Ø§Øª", count: 7 },
                { text: "Ø¨ÙØ³Ù€Ù…Ù Ø§Ù„Ù„Ù‡Ù Ø§Ù„Ø°ÙŠ Ù„Ø§ ÙŠÙØ¶ÙÙ€Ø±ÙÙ‘ Ù…ÙØ¹Ù Ø§Ø³Ù…ÙÙ€Ù‡Ù...", source: "3 Ù…Ø±Ø§Øª", count: 3 },
                { text: "Ø§Ù„Ù„Ù‘Ù‡ÙÙ€Ù…ÙÙ‘ Ø¨ÙÙƒÙ Ø£ÙØµÙ’Ù€Ø¨ÙØ­Ù’Ù†Ø§ ÙˆÙØ¨ÙÙƒÙ Ø£ÙÙ…Ù’Ø³ÙÙ€ÙŠÙ†Ø§...", source: "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©", count: 1 },
                { text: "Ø£ÙØµÙ’Ø¨ÙÙ€Ø­Ù’Ù€Ù†Ø§ Ø¹ÙÙ„ÙÙ‰ ÙÙØ·Ù’Ø±ÙØ©Ù Ø§Ù„Ø¥Ø³Ù’Ù„Ø§ÙÙ…Ù...", source: "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©", count: 1 },
                { text: "Ø³ÙØ¨Ù’Ø­Ù€Ø§Ù†Ù Ø§Ù„Ù„Ù‡Ù ÙˆÙØ¨ÙØ­ÙÙ…Ù’Ù€Ø¯ÙÙ‡Ù: Ø¹ÙØ¯ÙØ¯Ù Ø®ÙÙ„Ù’Ù€Ù‚ÙÙ‡...", source: "3 Ù…Ø±Ø§Øª", count: 3 },
                { text: "Ø§Ù„Ù„Ù‘Ù‡ÙÙ€Ù…ÙÙ‘ Ø¹Ø§ÙÙÙ€Ù†ÙŠ ÙÙŠ Ø¨ÙØ¯ÙÙ†Ù€ÙŠ...", source: "3 Ù…Ø±Ø§Øª", count: 3 },
                { text: "Ø§Ù„Ù„Ù‘Ù‡ÙÙ€Ù…ÙÙ‘ Ø¥ÙÙ†ÙÙ‘Ù€ÙŠ Ø£Ø³Ù’Ù€Ø£ÙÙ„ÙÙ€ÙƒÙ Ø§Ù„Ø¹ÙÙ€ÙÙ’ÙˆÙ...", source: "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©", count: 1 },
                { text: "ÙŠÙØ§ Ø­ÙÙŠÙÙ‘ ÙŠÙØ§ Ù‚ÙŠÙÙ‘ÙˆÙ…Ù Ø¨ÙØ±ÙØ­Ù’Ù…ÙØªÙÙƒÙ Ø£Ø³Ù’ØªÙØºÙÙŠØ«Ù...", source: "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©", count: 1 },
                { text: "Ø£ÙØµÙ’Ø¨ÙÙ€Ø­Ù’Ù€Ù†Ø§ ÙˆÙØ£ÙØµÙ’Ø¨ÙÙ€Ø­Ù’ Ø§Ù„Ù…ÙÙ€Ù„ÙƒÙ Ù„Ù„Ù‡Ù Ø±ÙØ¨ÙÙ‘ Ø§Ù„Ø¹Ù€Ø§Ù„ÙÙ…Ù€ÙŠÙ†...", source: "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©", count: 1 },
                { text: "Ø§Ù„Ù„Ù‘Ù‡ÙÙ€Ù…ÙÙ‘ Ø¹Ø§Ù„ÙÙ€Ù…Ù Ø§Ù„ØºÙÙ€ÙŠÙ’Ø¨Ù ÙˆÙØ§Ù„Ø´Ù‘Ù€Ù‡Ø§Ø¯ÙØ©Ù...", source: "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©", count: 1 },
                { text: "Ø£ÙØ¹Ù€ÙˆØ°Ù Ø¨ÙÙƒÙÙ„ÙÙ…Ù€Ø§ØªÙ Ø§Ù„Ù„Ù‘Ù‡Ù Ø§Ù„ØªÙ‘Ù€Ø§Ù…Ù‘Ù€Ø§ØªÙ...", source: "3 Ù…Ø±Ø§Øª", count: 3 },
                { text: "Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ ØµÙÙ„ÙÙ‘ ÙˆÙØ³ÙÙ„ÙÙ‘Ù…Ù’ ÙˆÙØ¨ÙØ§Ø±ÙÙƒÙ’ Ø¹Ù„Ù‰ Ù†ÙØ¨ÙÙŠÙÙ‘Ù†ÙØ§ Ù…ÙØ­Ù…ÙÙ‘Ø¯", source: "10 Ù…Ø±Ø§Øª", count: 10 },
                { text: "Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø¥ÙÙ†ÙÙ‘ÙŠ Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙÙƒÙ Ù…ÙÙ†Ù’ Ø§Ù„Ù’Ù‡ÙÙ…ÙÙ‘ ÙˆÙØ§Ù„Ù’Ø­ÙØ²ÙÙ†Ù...", source: "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©", count: 1 },
                { text: "Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø¥ÙÙ†ÙÙ‘ÙŠ Ø£ÙØ³Ù’Ø£ÙÙ„ÙÙƒÙ Ø¹ÙÙ„Ù’Ù…Ù‹Ø§ Ù†ÙØ§ÙÙØ¹Ù‹Ø§...", source: "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©", count: 1 },
                { text: "Ø£Ø³ØªØºÙØ± Ø§Ù„Ù„Ù‡ Ø§Ù„Ø¹Ø¸ÙŠÙ… ÙˆØ£ØªÙˆØ¨ Ø¥Ù„ÙŠÙ‡", source: "100 Ù…Ø±Ø©", count: 100 },
                { text: "Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡ ÙˆØ­Ø¯Ù‡ Ù„Ø§ Ø´Ø±ÙŠÙƒ Ù„Ù‡...", source: "100 Ù…Ø±Ø©", count: 100 },
                { text: "Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø­Ù…Ø¯Ù‡", source: "100 Ù…Ø±Ø©", count: 100 }
            ],
            evening: [
                { text: "Ø¢ÙŠØ© Ø§Ù„ÙƒØ±Ø³ÙŠ", source: "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©", count: 1 },
                { text: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¥Ø®Ù„Ø§Øµ", source: "3 Ù…Ø±Ø§Øª", count: 3 },
                { text: "Ø³ÙˆØ±Ø© Ø§Ù„ÙÙ„Ù‚", source: "3 Ù…Ø±Ø§Øª", count: 3 },
                { text: "Ø³ÙˆØ±Ø© Ø§Ù„Ù†Ø§Ø³", source: "3 Ù…Ø±Ø§Øª", count: 3 },
                { text: "Ø£ÙÙ…Ù’Ø³ÙÙŠÙ’Ù€Ù†Ø§ ÙˆÙØ£ÙÙ…Ù’Ø³Ù€Ù‰ Ø§Ù„Ù…ÙÙ€Ù„Ù’ÙƒÙ Ù„Ù„Ù‡...", source: "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©", count: 1 },
                { text: "Ø³ÙŠØ¯ Ø§Ù„Ø§Ø³ØªØºÙØ§Ø±", source: "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©", count: 1 },
                { text: "Ø±ÙØ¶ÙŠÙ€ØªÙ Ø¨ÙØ§Ù„Ù„Ù‡Ù Ø±ÙØ¨ÙÙ‘Ù€Ø§Ù‹...", source: "3 Ù…Ø±Ø§Øª", count: 3 },
                { text: "Ø§Ù„Ù„Ù‘Ù‡ÙÙ€Ù…ÙÙ‘ Ø¥ÙÙ†ÙÙ‘Ù€ÙŠ Ø£ÙÙ…Ø³ÙŠÙ’ØªÙ Ø£ÙØ´Ù’Ù€Ù‡ÙØ¯ÙÙƒ...", source: "4 Ù…Ø±Ø§Øª", count: 4 },
                { text: "Ø§Ù„Ù„Ù‘Ù‡ÙÙ€Ù…ÙÙ‘ Ù…Ø§ Ø£ÙÙ…Ù’Ø³ÙÙ‰ Ø¨ÙŠ Ù…ÙÙ€Ù†Ù’ Ù†ÙØ¹Ù’Ù€Ù…ÙØ©Ù...", source: "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©", count: 1 },
                { text: "Ø­ÙØ³Ù’Ø¨ÙÙ€ÙŠÙ Ø§Ù„Ù„Ù‘Ù‡Ù Ù„Ø§ Ø¥Ù„Ù‡Ù Ø¥Ù„Ø§Ù‘ Ù‡ÙÙˆÙ...", source: "7 Ù…Ø±Ø§Øª", count: 7 },
                { text: "Ø¨ÙØ³Ù€Ù…Ù Ø§Ù„Ù„Ù‡Ù Ø§Ù„Ø°ÙŠ Ù„Ø§ ÙŠÙØ¶ÙÙ€Ø±ÙÙ‘...", source: "3 Ù…Ø±Ø§Øª", count: 3 },
                { text: "Ø§Ù„Ù„Ù‘Ù‡ÙÙ€Ğ¼ÙÙ‘ Ø¨ÙÙƒÙ Ø£ÙÙ…Ù’Ø³ÙÙŠÙ’Ù€Ù†Ø§...", source: "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©", count: 1 },
                { text: "Ø£ÙÙ…Ù’Ø³ÙÙŠÙ’Ù€Ù†Ø§ Ø¹ÙÙ„ÙÙ‰ ÙÙØ·Ù’Ø±ÙØ©Ù Ø§Ù„Ø¥Ø³Ù’Ù„Ø§ÙÙ…Ù...", source: "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©", count: 1 },
                { text: "Ø³ÙØ¨Ù’Ø­Ù€Ø§Ù†Ù Ø§Ù„Ù„Ù‡Ù ÙˆÙØ¨ÙØ­ÙÙ…Ù’Ù€Ø¯ÙÙ‡Ù: Ø¹ÙØ¯ÙØ¯Ù Ø®ÙÙ„Ù’Ù€Ù‚ÙÙ‡...", source: "3 Ù…Ø±Ø§Øª", count: 3 },
                { text: "Ø§Ù„Ù„Ù‘Ù‡ÙÙ€Ù…ÙÙ‘ Ø¹Ø§ÙÙÙ€Ù†ÙŠ ÙÙŠ Ø¨ÙØ¯ÙÙ†Ù€ÙŠ...", source: "3 Ù…Ø±Ø§Øª", count: 3 },
                { text: "Ø§Ù„Ù„Ù‘Ù‡ÙÙ€Ù…ÙÙ‘ Ø¥ÙÙ†ÙÙ‘Ù€ÙŠ Ø£Ø³Ù’Ù€Ø£ÙÙ„ÙÙ€ÙƒÙ Ø§Ù„Ø¹ÙÙ€ÙÙ’ÙˆÙ...", source: "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©", count: 1 },
                { text: "ÙŠÙØ§ Ø­ÙÙŠÙÙ‘ ÙŠÙØ§ Ù‚ÙŠÙÙ‘ÙˆÙ…Ù Ø¨ÙØ±ÙØ­Ù’Ù…ÙØªÙÙƒÙ...", source: "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©", count: 1 },
                { text: "Ø£ÙÙ…Ù’Ø³ÙÙŠÙ’Ù€Ù†Ø§ ÙˆÙØ£ÙÙ…Ù’Ø³ÙÙ‰ Ø§Ù„Ù…ÙÙ€Ù„ÙƒÙ Ù„Ù„Ù‡Ù...", source: "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©", count: 1 },
                { text: "Ø§Ù„Ù„Ù‘Ù‡ÙÙ€Ù…ÙÙ‘ Ø¹Ø§Ù„ÙÙ€Ù…Ù Ø§Ù„ØºÙÙ€ÙŠÙ’Ø¨Ù...", source: "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©", count: 1 },
                { text: "Ø£ÙØ¹Ù€ÙˆØ°Ù Ø¨ÙÙƒÙÙ„ÙÙ…Ù€Ø§ØªÙ Ø§Ù„Ù„Ù‘Ù‡Ù Ø§Ù„ØªÙ‘Ù€Ø§Ù…Ù‘Ù€Ø§ØªÙ...", source: "3 Ù…Ø±Ø§Øª", count: 3 },
                { text: "Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ ØµÙÙ„ÙÙ‘ ÙˆÙØ³ÙÙ„ÙÙ‘Ù…Ù’...", source: "10 Ù…Ø±Ø§Øª", count: 10 },
                { text: "Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø¥ÙÙ†ÙÙ‘ÙŠ Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙÙƒÙ Ù…ÙÙ†Ù’ Ø§Ù„Ù’Ù‡ÙÙ…ÙÙ‘...", source: "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©", count: 1 },
                { text: "Ø£Ø³ØªØºÙØ± Ø§Ù„Ù„Ù‡ Ø§Ù„Ø¹Ø¸ÙŠÙ… ÙˆØ£ØªÙˆØ¨ Ø¥Ù„ÙŠÙ‡", source: "100 Ù…Ø±Ø©", count: 100 },
                { text: "Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡ ÙˆØ­Ø¯Ù‡ Ù„Ø§ Ø´Ø±ÙŠÙƒ Ù„Ù‡...", source: "100 Ù…Ø±Ø©", count: 100 },
                { text: "Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø­Ù…Ø¯Ù‡", source: "100 Ù…Ø±Ø©", count: 100 }
            ],
            sleep: [
                { text: "Ø¨ÙØ§Ø³Ù’Ù€Ù…ÙÙƒÙ Ø§Ù„Ù„Ù‘Ù‡ÙÙ€Ù…ÙÙ‘ Ø£ÙÙ…Ù€ÙˆØªÙ ÙˆÙØ£ÙØ­Ù’Ù€ÙŠØ§", source: "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©", count: 1 },
                { text: "Ø§Ù„Ø¥Ø®Ù„Ø§Øµ ÙˆØ§Ù„Ù…Ø¹ÙˆØ°ØªÙŠÙ†", source: "3 Ù…Ø±Ø§Øª", count: 3 },
                { text: "Ø¢ÙŠÙØ©Ù Ø§Ù„ÙƒÙØ±Ù’Ø³ÙÙŠÙÙ‘", source: "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©", count: 1 },
                { text: "Ø¨ÙØ§Ø³Ù’Ù€Ù…ÙÙƒÙ Ø±ÙØ¨ÙÙ‘Ù€ÙŠ ÙˆÙØ¶ÙØ¹Ù’Ù€ØªÙ Ø¬ÙÙ†Ù’Ù€Ø¨ÙŠ...", source: "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©", count: 1 },
                { text: "Ø§Ù„Ù„Ù‘Ù‡ÙÙ€Ù…ÙÙ‘ Ù‚ÙÙ†Ù€ÙŠ Ø¹ÙØ°Ø§Ø¨ÙÙ€ÙƒÙ...", source: "3 Ù…Ø±Ø§Øª", count: 3 },
                { text: "Ø§Ù„Ù€Ø­ÙÙ…Ù’Ù€Ø¯Ù Ù„Ù„Ù‡Ù Ø§Ù„ÙÙ‘Ø°ÙÙŠ Ø£ÙØ·Ù’Ù€Ø¹ÙÙ…ÙÙ€Ù†Ø§...", source: "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©", count: 1 },
                { text: "Ø§Ù„Ù„Ù‘Ù‡ÙÙ€Ù…ÙÙ‘ Ø£ÙØ³Ù’Ù€Ù„ÙÙ…Ù’ØªÙ Ù†ÙÙÙ’Ù€Ø³ÙŠ Ø¥ÙÙ„ÙÙ€ÙŠÙ’ÙƒÙ...", source: "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©", count: 1 },
                { text: "Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡", source: "33 Ù…Ø±Ø©", count: 33 },
                { text: "Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡", source: "33 Ù…Ø±Ø©", count: 33 },
                { text: "Ø§Ù„Ù„Ù‡ Ø£ÙƒØ¨Ø±", source: "34 Ù…Ø±Ø©", count: 34 }
            ],
            baqiyat: [
                { text: "Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡", source: "Ø§Ù„Ø¨Ø§Ù‚ÙŠØ§Øª Ø§Ù„ØµØ§Ù„Ø­Ø§Øª", count: 100 },
                { text: "Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡", source: "Ø§Ù„Ø¨Ø§Ù‚ÙŠØ§Øª Ø§Ù„ØµØ§Ù„Ø­Ø§Øª", count: 100 },
                { text: "Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡", source: "Ø§Ù„Ø¨Ø§Ù‚ÙŠØ§Øª Ø§Ù„ØµØ§Ù„Ø­Ø§Øª", count: 100 },
                { text: "Ø§Ù„Ù„Ù‡ Ø£ÙƒØ¨Ø±", source: "Ø§Ù„Ø¨Ø§Ù‚ÙŠØ§Øª Ø§Ù„ØµØ§Ù„Ø­Ø§Øª", count: 100 },
                { text: "Ù„Ø§ Ø­ÙˆÙ„ ÙˆÙ„Ø§ Ù‚ÙˆØ© Ø¥Ù„Ø§ Ø¨Ø§Ù„Ù„Ù‡", source: "ÙƒÙ†Ø² Ù…Ù† ÙƒÙ†ÙˆØ² Ø§Ù„Ø¬Ù†Ø©", count: 100 }
            ]
        };

        let currentMode = 'morning';
        let reminderTimeout = null;

        function initializeDhikrData() {
            Object.keys(dhikrData).forEach(mode => {
                dhikrData[mode].forEach(dhikr => {
                    dhikr.currentCount = 0;
                    dhikr.completed = false;
                });
            });
        }

        function saveProgress() {
            const progress = {};
            Object.keys(dhikrData).forEach(mode => {
                progress[mode] = dhikrData[mode].map(d => ({ currentCount: d.currentCount, completed: d.completed }));
            });
            localStorage.setItem('dhikrProgress_v4', JSON.stringify(progress));
        }

        function loadProgress() {
            const savedProgress = localStorage.getItem('dhikrProgress_v4');
            if (savedProgress) {
                const progress = JSON.parse(savedProgress);
                Object.keys(progress).forEach(mode => {
                    if (dhikrData[mode]) {
                        progress[mode].forEach((item, index) => {
                            if (dhikrData[mode][index]) {
                                dhikrData[mode][index].currentCount = item.currentCount || 0;
                                dhikrData[mode][index].completed = item.completed || false;
                            }
                        });
                    }
                });
            }
        }

        function createDhikrCard(dhikr, index) {
            const card = document.createElement('div');
            card.className = `dhikr-card ${dhikr.completed ? 'completed' : ''}`;
            card.dataset.index = index;
            card.innerHTML = `
                <p class="dhikr-text">${dhikr.text}</p>
                <p class="dhikr-source">${dhikr.source}</p>
                <div class="dhikr-counter-display">${dhikr.currentCount}/${dhikr.count}</div>
            `;
            card.addEventListener('click', () => handleCardClick(index));
            return card;
        }

        function displayDhikr() {
            const container = document.getElementById('dhikr-container');
            container.innerHTML = '';
            dhikrData[currentMode].forEach((dhikr, index) => {
                container.appendChild(createDhikrCard(dhikr, index));
            });
        }

        function handleCardClick(index) {
            const dhikr = dhikrData[currentMode][index];
            if (dhikr.completed) return;

            dhikr.currentCount++;
            if (dhikr.currentCount >= dhikr.count) {
                dhikr.completed = true;
            }
            
            saveProgress();
            updateCard(index);
        }

        function updateCard(index) {
            const card = document.querySelector(`.dhikr-card[data-index='${index}']`);
            if (card) {
                const dhikr = dhikrData[currentMode][index];
                card.querySelector('.dhikr-counter-display').textContent = `${dhikr.currentCount}/${dhikr.count}`;
                if (dhikr.completed) {
                    card.classList.add('completed');
                }
            }
        }

        window.showSection = function(mode, clickedButton) {
            currentMode = mode;
            document.body.className = mode;
            
            const titles = {
                morning: 'Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­', evening: 'Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¡',
                sleep: 'Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù†ÙˆÙ…', baqiyat: 'Ø§Ù„Ø¨Ø§Ù‚ÙŠØ§Øª Ø§Ù„ØµØ§Ù„Ø­Ø§Øª'
            };
            document.getElementById('main-title').textContent = titles[mode];

            const buttons = document.querySelectorAll('.controls .btn');
            buttons.forEach(button => button.classList.remove('active'));
            clickedButton.classList.add('active');
            
            displayDhikr();
        }

        document.getElementById('reset-all-btn').addEventListener('click', () => {
            dhikrData[currentMode].forEach(dhikr => {
                dhikr.currentCount = 0;
                dhikr.completed = false;
            });
            saveProgress();
            displayDhikr();
        });

        // Reminder Logic
        const reminderTimeInput = document.getElementById('reminder-time');
        const saveReminderBtn = document.getElementById('save-reminder-btn');
        const cancelReminderBtn = document.getElementById('cancel-reminder-btn');
        const reminderStatus = document.getElementById('reminder-status');

        function scheduleReminder(time) {
            if (reminderTimeout) clearTimeout(reminderTimeout);
            
            const [hours, minutes] = time.split(':');
            const now = new Date();
            let reminderDate = new Date(now.getFullYear(), now.getMonth(), now.getDate(), hours, minutes, 0, 0);

            if (reminderDate < now) {
                reminderDate.setDate(reminderDate.getDate() + 1);
            }

            const timeToReminder = reminderDate.getTime() - now.getTime();

            reminderTimeout = setTimeout(() => {
                new Notification('ØªØ°ÙƒÙŠØ± Ø§Ù„Ø£Ø°ÙƒØ§Ø±', {
                    body: 'Ø­Ø§Ù† ÙˆÙ‚Øª Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø£Ø°ÙƒØ§Ø± Ø§Ù„ÙŠÙˆÙ…ÙŠØ©. Ø§ÙØªØ­ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¢Ù†.',
                    icon: 'https://azizq8aa.github.io/dhikr-github-pages/favicon.ico' 
                });
                scheduleReminder(time); 
            }, timeToReminder);

            localStorage.setItem('dhikrReminderTime', time);
            updateReminderStatus();
        }

        function updateReminderStatus() {
            const savedTime = localStorage.getItem('dhikrReminderTime');
            if (savedTime) {
                reminderStatus.textContent = `ØªÙ… Ø¶Ø¨Ø· Ø§Ù„ØªØ°ÙƒÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ Ø§Ù„Ø³Ø§Ø¹Ø© ${savedTime}.`;
                reminderTimeInput.value = savedTime;
            } else {
                reminderStatus.textContent = 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ°ÙƒÙŠØ± Ù…Ø­ÙÙˆØ¸ Ø­Ø§Ù„ÙŠÙ‹Ø§.';
            }
        }

        saveReminderBtn.addEventListener('click', () => {
            const time = reminderTimeInput.value;
            if (time) {
                if (Notification.permission === 'granted') {
                    scheduleReminder(time);
                } else if (Notification.permission !== 'denied') {
                    Notification.requestPermission().then(permission => {
                        if (permission === 'granted') {
                            scheduleReminder(time);
                        } else {
                            alert('ØªÙ… Ø±ÙØ¶ Ø¥Ø°Ù† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª. Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø­ÙØ¸ Ø§Ù„ØªØ°ÙƒÙŠØ±.');
                        }
                    });
                } else {
                    alert('Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù…Ø­Ø¸ÙˆØ±Ø©. ÙŠØ±Ø¬Ù‰ ØªÙØ¹ÙŠÙ„Ù‡Ø§ Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ØªØµÙØ­.');
                }
            } else {
                alert('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ÙˆÙ‚Øª Ù„Ù„ØªØ°ÙƒÙŠØ± Ø£ÙˆÙ„Ø§Ù‹.');
            }
        });

        cancelReminderBtn.addEventListener('click', () => {
            if (reminderTimeout) clearTimeout(reminderTimeout);
            localStorage.removeItem('dhikrReminderTime');
            reminderTimeInput.value = '';
            updateReminderStatus();
            alert('ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ°ÙƒÙŠØ± Ø§Ù„Ù…Ø­ÙÙˆØ¸.');
        });

        // Initial Load
        document.addEventListener('DOMContentLoaded', () => {
            initializeDhikrData();
            loadProgress();
            displayDhikr();
            updateReminderStatus();
            
            const savedTime = localStorage.getItem('dhikrReminderTime');
            if (savedTime && Notification.permission === 'granted') {
                scheduleReminder(savedTime);
            }
        });
    </script>
</body>
</html>
